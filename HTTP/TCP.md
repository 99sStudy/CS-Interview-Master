## ✨TCP란 무엇인가요?

서버와 클라이언트 간에 데이터를 신뢰성 있게 전달하기 위해 만들어진 프로토콜입니다.

- 데이터를 전송하기 전에 데이터 전송을 위한 연결을 만드는 **연결지향 프로토콜**입니다.
- 데이터는 네트워크 선로를 통해 전달되는 과정에서 손실되거나 순서가 뒤바뀔 수 있는데, TCP는 손실을 검색해내서 이를 교정하고 순서를 재조합할 수 있도록 해줍니다.

## 🔁꼬리질문

### 🤔 TCP의 특징에 대해서 설명해주세요.

- **신뢰성 있는 데이터 통신**을 가능하게 합니다. (Sequence Number, Ack Number)
- 데이터의 **경계를 구분하지 않습니다**. (바이트 스트림 서비스)
- 데이터의 **전송 순서**를 보장합니다. (순서 유지를 위해 각 바이트마다 번호를 부여)
- **데이터 흐름 제어**(수신자 버퍼 오버플로우 방지) 및 **혼잡 제어**(패킷 수가 과도하게 증가하는 현상 방지)
- 연결의 설정 (**3-way handshake**) 및 해제 (**4-way handshake**)
- **전이중(Full-Duplex)**, **점대점(Point to Point)** 서비스
- UDP에 비해 전송 속도가 느립니다.

### 🤔 UDP란 무엇인가요?

UDP는 ‘User Datagram Protocol,’ 즉 ‘사용자 데이터그램 프로토콜’의 약자입니다.

UDP 네트워크 프로토콜은 TCP에 비해 안정성은 떨어지지만 더 빠르고 간단합니다.

그래서 스트리밍이나 게임과 같이 빠른 속도가 중요한 상황에서 자주 사용됩니다.

### TCP의 신뢰성은 어떻게 보장되나요?

```
TCP는 자신이 보낸 Data에 대해 상대방이 받았다는 응답 packet을 받아야 합니다.

그렇지 않으면, packet이 유실되었다고 판단하고 다시 보냅니다.

TCP는 Header의 Checksum을 이용해 오류를 확인하는데, Data가 잘 보내 졌다면 ACK Flag를 1으로, 그렇지 않으면 0으로 보냅니다.

또한 Sequence Number를 이용하여 순서를 보장하기 때문에 신뢰성이 보장됩니다.
```

- 연결 설정(Three-Way Handshake): TCP는 데이터 전송 전에 송신자와 수신자 간에 세 단계의 핸드셰이크를 통해 연결을 설정합니다. 이를 통해 양쪽이 통신할 준비가 되었음을 확인합니다.

- 데이터 분할 및 재조립: TCP는 큰 데이터를 작은 세그먼트로 분할하여 전송합니다. 수신자는 이 세그먼트를 다시 원래의 데이터로 재조립합니다. 각 세그먼트는 고유한 순서 번호를 가지므로 올바른 순서로 재조립할 수 있습니다.

- 오류 검출 및 수정: 각 세그먼트는 체크섬을 포함하여 전송됩니다. 수신자는 체크섬을 사용하여 데이터의 무결성을 확인합니다. 오류가 발견되면 재전송을 요청합니다.

- 흐름 제어(Flow Control): TCP는 수신자의 버퍼 크기를 고려하여 송신자가 데이터를 너무 빠르게 보내지 않도록 조절합니다. 이를 통해 수신자의 버퍼 오버플로우를 방지합니다.

- 혼잡 제어(Congestion Control): 네트워크 혼잡을 줄이기 위해 TCP는 혼잡 제어 알고리즘을 사용합니다. 이는 네트워크 상태를 모니터링하고, 혼잡이 감지되면 전송 속도를 조절합니다.

- ACK(Acknowledgment) 및 재전송: 수신자는 성공적으로 받은 세그먼트에 대해 ACK(확인 응답)를 보냅니다. 송신자는 일정 시간 내에 ACK를 받지 못하면 해당 세그먼트를 재전송합니다.

### 🤔 TCP 커넥션의 순서를 설명해주세요.

1. 브라우저가 커넥션을 요청할 서버를 찾습니다.
2. 브라우저가 `timegambit.com`이라는 호스트 명을 추출합니다.
3. 호스트 명에 대한 IP 주소를 찾습니다.
4. 브라우저가 포트 번호를 얻습니다. 포트 번호가 생략된 경우 https는 443, http는 80을 사용합니다.
5. 브라우저가 `76.76.21.61`의 443 포트로 TCP 커넥션을 생성합니다.
6. 브라우저가 서버로 HTTP GET 요청 메시지를 보냅니다.
7. 브라우저가 서버에서 온 HTTP 응답 메시지를 읽습니다.
8. 브라우저가 TCP 커넥션을 닫습니다.

## 🔁관련 꼬리질문

## ✨ HTTP의 성능 저하를 일으키는 원인이 무엇인가요?

HTTP는 TCP 바로 위에 있는 계층이기 때문에 HTTP 트랜잭션 성능은 그 아래 계층인 `TCP 성능에 악영향을 받습니다.`

1. **DNS 이름 분석 인프라**를 사용하여 URI에 있는 호스트 명을 IP 주소로 변환하는데 걸리는 시간
2. **TCP 커넥션 요청 후 응답을 회신하는데 기다리는 시간** (수백 개의 HTTP 트랜잭션이 만들어지면 소요 시간 크게 증가)
3. 커넥션이 맺어진 후 **요청 메시지를 처리하는데 걸리는 시간**
4. **웹 서버가 응답을 보내는 시간**

## ✨ 순차적인 트랜잭션 처리에 의한 지연 해결 방법

1. **병렬 커넥션**
2. **지속 커넥션**
3. **파이프라인 커넥션**
4. **다중 커넥션**

### 🤔 병렬 커넥션이 무엇인가요?

병렬 커넥션은 클라이언트가 여러 개의 커넥션을 맺음으로써 여러 개의 HTTP 트랜잭션을 병렬로 처리할 수 있게 하는 방법입니다.

### 🤔 지속 커넥션이 무엇인가요?

하나의 웹 페이지에 첨부된 이미지들이나 하이퍼링크들은 대부분 같은 웹 사이트를 가리킵니다. 서버에 HTTP 요청을 하기 시작한 애플리케이션은 같은 서버에 또 요청하게 되는데, 이것을 **지역성(site locality)**이라 부릅니다.

따라서 HTTP/1.1을 지원하는 기기는 처리가 완료된 후에도 TCP 커넥션을 유지하여 다음 요청에도 재사용할 수 있는데, 이것을 **지속 커넥션**이라 부릅니다. 지속 커넥션을 재사용함으로써 커넥션을 맺기 위한 준비 작업 시간을 절약할 수 있습니다.

### 🤔 지속 커넥션과 병렬 커넥션의 차이

- **병렬 커넥션의 단점**

  - 각 트랜잭션마다 새로운 커넥션을 맺고 끊기 때문에 시간과 대역폭이 소요됩니다.
  - 각각의 새로운 커넥션은 TCP 느린 시작 때문에 성능이 떨어집니다.
  - 실제로 연결할 수 있는 병렬 커넥션의 수에는 제한이 있습니다.

- **지속 커넥션의 장점**

  - 커넥션을 맺기 위한 사전 작업과 지연을 줄여주고, 튜닝된 커넥션을 유지하며, 커넥션의 수를 줄여줍니다.

- **튜닝된 커넥션이란?**
  - TCP 느린 시작에서, 패킷을 수차례 성공적으로 전송한 결과로 한 번에 다수의 패킷을 전송할 수 있는 권한을 얻은 커넥션을 말합니다.

두 가지를 함께 사용할 때 가장 효과적이기 때문에, 오늘날 많은 웹 애플리케이션은 적은 수의 병렬 커넥션만을 맺고 그것을 유지합니다.
