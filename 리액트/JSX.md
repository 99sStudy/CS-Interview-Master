## ✨JSX에 대해서 설명해주세요.

JSX(JavaScript XML)는 `React 라이브러리에서 사용하는 문법 확장`으로, `JavaScript 코드 내에서 XML과 유사한 구문을 사용할 수 있게` 해줍니다.

JSX는 React 컴포넌트를 정의할 때 `HTML과 비슷한 구문을 사용하여 UI를 구성할 수 있도록` 도와줍니다.

JSX는 JavaScript 코드로 변환되며, React 요소를 생성하는 데 사용됩니다.

## 🔁꼬리질문

### 🤔브라우저는 JSX 파일을 읽을 수 있나요?

브라우저는 JSX 파일을 직접 읽을 수는 없습니다.

JSX 파일을 읽기 위해서는 `JSX를 자바스크립트 객체로 변환`해야 하며, 그 변환 작업은 바벨과 같은 컴파일러를 통해 이루어집니다.

<br/>
과거에는 JSX 파일 내에서 React를 import를 해야 했는데,

그 이유는 컴파일러를 통해 JSX 코드가 자바스크립트 코드로 변환이 되면 React.createElement()를 호출해야 했고,

정상적인 호출을 위해 React가 스코프 내에 존재해야 했었기 때문입니다.

하지만 2020년 10월 20일에 릴리즈 된 React 17부터는 컴파일 시 React.createElement()로 변환하는 방식이 아닌 컴파일러가 `JSX 변환에 필요한 특수한 함수를 자동적으로 import 해오는 방식`을 도입했기 때문에 React를 import 하지 않아도 되게 되었습니다.

### 🤔Babel이란 무엇인가요?

Babel은 `ES6와 같은 자바스크립트 최신 버전의 코드를 이 전 버전의 코드로 변환시켜주는 도구`이며, TypeScript, JSX를 변환시켜 주기도 한다.

### 🤔babel을 쓰는 이유는 무엇인가요?

1. 크로스 브라우징
   - JavaScript (ES6) -> JavaScript(ES5)로 변환해줍니다. (브라우저 하위 호환성을 생각)
   - 각 브라우저마다 JavaScript 엔진이 다르지만, 모든 브라우저에서 동작하도록 호환성을 지켜줍니다.
2. 폴리필(polyfill)
   - 폴리필은 개발자가 특정 기능이 지원되지 않는 브라우저를 위해 사용할 수 있는 코드 조각이나 플러그인을 의미합니다.
   - 폴리필은 프로그램이 처음에 시작될 때 현재 브라우저에서 지원하지 않는 함수를 검사해서 각 object의 prototype에 붙여주는 역할을 합니다.
   - babel 은 babel-polyfill 모듈을 사용하면 되지만, 현재 deprecated 되었기 때문에 core-js와 regenerator-runtime을 직접 사용하는 방식을 제안하고 있다.

### 🤔Babel은 컴파일러인가요 트랜스파일러인가요?

먼저 컴파일러는 ` 고수준 언어로 작성된 소스 코드를 기계어나 바이트코드와 같은 저수준 언어로 변환하는`하는 것을 의미합니다.
그리고 트랜스파일러는 `고수준 언어로 작성된 소스 코드를 다른 고수준 언어로 변환`하는 것을 의미합니다.

```
바벨 공식 문서에서 가장 먼저 보이는 문구는 "바벨은 자바스크립트 컴파일러입니다."이다.
내 얕은 지식으로 봤을 땐 '왜 컴파일러라고 하지? 트랜스파일러가 아닌가?'라는 생각이 들었다. 짧은 시간 동안 해당 내용에 대해 찾아봤다.

일반적으로 컴파일러는 고수준의 언어에서 저수준의 언어로 변환, 트랜스파일러는 비슷한 수준의 추상화를 가진 언어 간의 변환을 뜻한다.
트랜스파일러는 '소스 대 소스 컴파일러(source-to-source compiler)'라고도 불리며 컴파일러의 일종이라고 설명되어 있다.
엄밀히 말하면 트랜스파일러로 볼 수 있지만, 더 큰 범주에선 컴파일러인 것이다.
개인적으로 트랜스파일러와 컴파일러라고 구별하여 부르는 것이 의사소통에 있어서 어느 정도 가치 있다고 생각을 하지만, 공식 문서에서 컴파일러라고 설명하는 만큼 해당 문서의 고유한 단어로 사용하는 것이 맞다고 생각한다.

"바벨은 무엇일까요? 바벨은 자바스크립트 컴파일러입니다.
C 컴파일러처럼 어셈블리어나 바이너리 코드를 생성하는 전통적인 컴파일러는 아닙니다.
바벨은 자바스크립트를 자바스크립트로 컴파일하는 컴파일러(javascript to javascript compiler)입니다.
기존의 코드와 같은 의미를 갖는 또 다른 자바스크립트 코드를 출력합니다."- 바벨 팀원인 니콜라스 리바우도(Nicolò Ribaudo)의 @babel/how-to 발표 중 내용
```

### 🤔Polyfill이란 무엇인가요?

오래된 버전의 브라우저에서는 현재 JavaScript가 당연하게 사용하고 있는 Promise나 Set 객체가 없는 경우가 있습니다.

최신 브라우저에서는 잘 동작하지만, 오래된 브라우저에서는 실패합니다. 객체나 메서드에 대한 구현이 없기 때문이죠.

이런 문제를 해결하기 위해서는 오래된 브라우저에서 없는 구현을 채워주어야 합니다. 이렇게 구현을 채워주는 스크립트를 Polyfill이라고 합니다.

### 🤔Polyfill의 단점은 무엇인가요?

코드를 작성하면 폭넓은 브라우저를 지원할 수 있다는 장점이 있지만 문제가 하나 생깁니다.

불러와야 하는 JavaScript 코드가 많아진다는 점입니다.

실행해야 하는 Polyfill 스크립트가 많아질수록 사용자가 경험하는 웹 서비스의 성능은 나빠집니다.

`해결방법`은

1. @babel/preset-env 사용하기
   - @babel/preset-env Smart Preset을 사용하는 것입니다.
   - 이 Smart Preset은 이미 정의된 브라우저 목록에 따라서 자동으로 필요 없는 Polyfill을 제거해 줍니다
   - 예를 들어 preset에 설정해주면 Internet Explorer 11에 필요한 Polyfill 목록만 포함
2. User-agent에 따라 동적으로 스크립트 생성하기
   - `preset을 설정해도 최신 버전의 브라우저에서 불필요한 스크립트를 내려받게 되는 문제는 동일`합니다.
   - 예를 들어서, Chrome 최신 버전은 문제없이 [1, 2, 3].at(-1) 을 실행할 수 있지만, 관련한 Polyfill 스크립트를 내려받습니다.
   - `$ curl -XGET "https://polyfill.io/v3/polyfill.min.js" \` 로 요청해서 브라우저에 따라 동적인 Pollyfill 스크립트를 생성할 수 있다.
3. 자체 Polyfill 서비스 구축하기
   - 토스에서는 polyfill.io 서비스를 그대로 사용할 수도 있었지만, Financial Times가 제공하는 Polyfill 중 일부가 ECMAScript 표준대로 작동하지 않아 오류가 발생한 경험이 있어서 자체적으로 구현했습니다.
   - core-js 와 core-js-compat, browserslist-useragent 라이브러리를 사용하면 손쉽게 동적인 Polyfill을 제공하는 Node.js 서버를 만들 수 있었습니다.
