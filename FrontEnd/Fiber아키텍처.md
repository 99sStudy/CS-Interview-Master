# ✨React Fiber 아키텍처에 대해 설명하고, 기존의 React Stack과 비교했을 때 Fiber가 어떤 문제를 해결하는지 설명해주세요. 또한, Fiber가 React의 성능을 어떻게 개선하는지와 이를 기반으로 한 비동기 렌더링의 동작 원리를 설명해주세요.

React Fiber 아키텍처는 React의 렌더링 엔진을 새롭게 설계하여 성능과 사용자 경험을 개선하기 위해 도입되었습니다. 기존 Stack 아키텍처와의 차이점, Fiber의 도입 배경, 그리고 성능 최적화 방법에 대해 깊이 있게 설명하겠습니다.

### 1. 기존 Stack 아키텍처 vs. Fiber 아키텍처

**기존 Stack 아키텍처:**

- **동기적 렌더링:** 모든 렌더링 작업이 `동기적으로 처리`되어, `긴 작업이 발생할 경우 UI가 멈추는 '프리즈' 현상`이 발생했습니다.
- **단일 스레드:** 렌더링과 업데이트가 한 스레드에서 이루어져, 다른 작업과의 병행 처리가 불가능했습니다.
- **재조정 알고리즘의 비효율성:** 컴포넌트의 업데이트가 발생할 때, 전체 트리를 다시 렌더링하는 방식으로 비효율적이었습니다.

**Fiber 아키텍처:**

- **비동기적 렌더링:** Fiber는 `렌더링 작업을 여러 개의 작은 조각으로 나누어 비동기적으로 처리`할 수 있습니다. 이를 통해 `UI의 응답성`을 높였습니다.
- **우선순위 기반 처리:** 각 작업에 `우선순위를 부여`하여, `중요한 작업이 먼저 실행`될 수 있도록 합니다.
- **중단 가능성:** `긴 작업을 중단하고 후에 재개`할 수 있는 기능을 통해, `사용자 경험을 개선`합니다.
- **효율적인 재조정:** Fiber는 컴포넌트를 업데이트할 때 `필요한 부분만 업데이트하여 성능을 최적화`합니다.

### 2. Fiber 도입 배경

Fiber 아키텍처는 다음과 같은 문제를 해결하기 위해 도입되었습니다:

- **UI 응답성:** 사용자 `상호작용이 빈번한 환경`에서 `긴 렌더링 작업으로 인해 UI가 멈추는 것을 방지`하기 위해.
- **복잡한 애플리케이션:** SPA(Single Page Application)와 같은 복잡한 애플리케이션에서 `다양한 컴포넌트가 동시에 업데이트될 때`, 이를 `효율적으로 처리할 수 있는 방법이 필요`했습니다.
- **비동기 작업 증가:** 애플리케이션의 `비동기 작업이 증가함`에 따라, `이를 효과적으로 관리할 수 있는 구조가 필요`했습니다.

### 3. 성능 최적화 방법

Fiber는 여러 가지 성능 최적화 메커니즘을 제공합니다:

- **비동기 렌더링:** `긴 렌더링 작업`을 `여러 개의 작은 작업으로 쪼개어 처리`함으로써, `UI가 부드럽고 반응적으로 작동`합니다.
- **작업 우선순위:** React는 `각 작업에 우선순위를 부여`하여, 사용자 입력과 같은 `중요한 작업을 먼저 처리`합니다. 이를 통해 사용자 경험을 개선합니다.
- **타임 슬라이스:** `주어진 시간 내에 가능한 많은 작업을 수행`하고, 시간이 부족할 경우 `다음 프레임으로 작업을 미루어 UI의 응답성을 유지`합니다.
- **중단 및 재개:** `긴 작업을 중단`하고 `우선순위가 높은 작업을 처리`한 후, 다시 `중단된 작업을 재개`함으로써 전체적인 성능을 개선합니다.
- **최적화된 재조정:** Fiber는 컴포넌트의 업데이트 시, `변경된 부분만을 효율적으로 업데이트하여 불필요한 렌더링을 줄입니다.`

# ✨Fiber 아키텍처와 Stack Reconciliation의 차이점

1. **렌더링 방식**:

   - **Stack Reconciliation**: 이 방식은 깊이 우선 탐색(DFS) 방식을 사용하여 렌더링을 수행합니다.
     - 트리의 모든 노드를 한 번에 처리하며, 렌더링이 진행되는 동안 다른 작업을 중단합니다.
     - 이로 인해 긴 렌더링 작업이 발생하면 UI가 응답하지 않는 문제가 발생할 수 있습니다.
   - **Fiber 아키텍처**: Fiber는 작업을 작은 단위로 나누어 처리합니다. 각 작업은 "Fiber"라는 단위로 표현되며, 이를 통해 렌더링이 중단되고, 다른 작업이 우선적으로 수행될 수 있습니다. 이로 인해 UI가 더 부드럽고 응답성이 좋아집니다.

2. **업데이트 우선 순위**:
   - **Stack Reconciliation**: 모든 업데이트가 동일한 우선 순위를 가지며, 긴 작업이 진행되는 동안 다른 업데이트를 처리할 수 없습니다.
   - **Fiber 아키텍처**: Fiber는 업데이트의 우선 순위를 설정할 수 있어, 긴 작업이 있는 동안에도 중요한 업데이트를 먼저 처리할 수 있습니다. 예를 들어, 사용자 입력에 대한 반응을 우선적으로 처리할 수 있습니다.

### Fiber의 비동기 렌더링

Fiber는 비동기 렌더링을 가능하게 하는 여러 기능을 제공합니다:

1. **작업 큐**: Fiber는 작업을 큐에 저장하여, 필요할 때마다 작업을 꺼내어 처리합니다. 이 큐는 현재 작업, 대기 중인 작업, 우선 순위가 높은 작업 등을 관리합니다.

2. **중단 및 재개**: 긴 렌더링 작업을 처리하는 도중 언제든지 작업을 중단하고, 나중에 다시 시작할 수 있습니다. 이는 사용자 인터페이스가 항상 응답성을 유지할 수 있도록 합니다.

3. **시간 슬라이스**: Fiber는 작업을 작은 조각으로 나누어 처리하여, 각 작업이 너무 오래 걸리지 않도록 합니다. 이로 인해 UI가 사용자의 입력에 즉각적으로 반응할 수 있습니다.

### 작업 단위와 우선 순위 기반 작업 처리의 성능 최적화 기여

1. **작업 단위**: 각 Fiber 노드는 최소한의 정보를 포함하며, 이는 메모리 사용을 줄이고, 렌더링 성능을 최적화하는 데 기여합니다. 또한, 작은 작업 단위로 분할되기 때문에, 긴 렌더링 작업이 UI 스레드를 차지하지 않고, 다른 작업을 처리할 수 있습니다.

2. **우선 순위 기반 작업 처리**: 작업에 우선 순위를 부여함으로써, 중요한 작업(예: 사용자 입력 처리)이 긴 작업(예: 데이터를 로드하는 작업)보다 먼저 처리될 수 있습니다. 이는 사용자 경험을 향상시키고, 애플리케이션의 반응성을 높입니다.

3. **스케줄링**: Fiber는 스케줄러를 사용하여 작업의 우선 순위를 기반으로 처리 순서를 조정합니다. 이를 통해, CPU 자원을 효율적으로 사용할 수 있고, 전반적인 성능 최적화에 기여합니다.
