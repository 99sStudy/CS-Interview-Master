# ✨가상 DOM의 동작 원리를 설명하고, 실제 DOM과의 차이점을 설명해 주세요. 또한, Virtual DOM을 사용하는 React의 렌더링 성능 최적화 방식에 대해 설명하고, shouldComponentUpdate 또는 React.memo와 같은 기법이 어떤 역할을 하는지 설명하세요.

`가상 DOM (Virtual DOM)`은 리액트와 같은 라이브러리에서 사용하는 개념으로, 실제 DOM을 효율적으로 업데이트하기 위해 설계된 메모리 내의 가벼운 복사본입니다.

```
DOM을 다시 그리는 행위는 비용이 큰 행위입니다.

브라우저가 버벅거릴 수 있는 행위입니다.

그렇기 때문에 리액트는 정확하게 바뀐 부분만 다시 그려주는 것에 집중을 하는데

그러기 위해 그 DOM의 구조를 메모리 상의 객체로 표현한 것이 가상 DOM입니다.

추가적으로 React는 Reconciliation이라는 걸 통해서 어떤 부분이 달라졌는지 확인합니다.

그런데 과거의 Reconciliation 알고리즘은 React 앱 규모가 커지면 커질수록 Reconciliation 과정도 오래걸려 성능에 영향이 가게 되었습니다.

그래서 React는 React Fiber라는 것을 출시해서 Reconciliation 과정을 개선했습니다.

파이버는 여러가지 setState를 한번에 묶어서 처리하는 batch update를 수행하고,

우선순위를 둬서 처리할 수 있게 해서 React 내부적으로 업데이트 성능을 개선했습니다.

결과적으로 "가상 DOM은 DOM이라기 보다는 바뀐 부분을 정확하게 파악하고, 효울적으로 업데이트하기 위한 알고리즘이라고도 할 수 있다."

```

가상 DOM의 동작 원리는 다음과 같습니다:

1. 초기 렌더링: 컴포넌트가 처음 렌더링될 때, 리액트는 해당 컴포넌트의 가상 DOM 트리를 생성합니다. 이 트리는 실제 DOM의 구조를 메모리에서 표현합니다.

2. 상태 업데이트: 사용자가 상호작용하거나 데이터가 변경되면, 리액트는 새로운 상태를 기반으로 새로운 가상 DOM 트리를 생성합니다.

3. 차이점 계산 (Diffing): 리액트는 이전의 가상 DOM과 새로운 가상 DOM을 비교하여 어떤 부분이 변경되었는지를 계산합니다. 이 과정에서는 효율적인 알고리즘을 사용하여 변경된 부분만을 찾아냅니다.

4. 실제 DOM 업데이트: 변경된 부분을 계산한 후, 리액트는 실제 DOM에 최소한의 변경을 적용합니다. 이 과정을 통해 리렌더링 비용을 줄이고 성능을 최적화합니다.

## React의 렌더링 성능 최적화 방식

리액트는 가상 DOM을 사용하여 렌더링 성능을 최적화합니다.

이를 통해 DOM 조작의 비용을 줄이고, 애플리케이션의 반응성을 높일 수 있습니다.

주요 최적화 방식은 다음과 같습니다:

1. `Batching`: `여러 상태 업데이트를 하나의 렌더링 과정으로 묶어 처리`합니다. 이를 통해 여러 번의 렌더링을 하나로 줄여 성능을 향상시킵니다.

2. `Diffing 알고리즘`: 리액트는 `효율적인 알고리즘을 사용`하여 가상 DOM의 변경 사항을 계산합니다. 이로 인해 실제 DOM 업데이트가 최소화됩니다.

3. `Reconciliation`: 리액트는 각 컴포넌트가 어떤 방식으로 변경될지를 판단하여 `필요한 부분만 업데이`트`합니다. 이는 성능을 더욱 개선합니다.

### shouldComponentUpdate

- 정의: `클래스형 컴포넌트에서 사용되는 라이프사이클 메서드`로, `컴포넌트가 업데이트될 때 렌더링을 수행할지를 결정`합니다.
- 역할: 이 메서드가 false를 반환하면 해당 컴포넌트는 업데이트되지 않고, 렌더링이 생략됩니다. 이는 `불필요한 렌더링을 방지`하여 성능을 개선하는 데 도움을 줍니다.

```javascript
class MyComponent extends React.Component {
  shouldComponentUpdate(nextProps, nextState) {
    return nextProps.value !== this.props.value; // props가 변경된 경우에만 업데이트
  }
}
```

### React.memo

- 정의: `함수형 컴포넌트에서 사용할 수 있는 고차 컴포넌트`입니다. `컴포넌트의 props가 변경되지 않으면 이전 렌더링 결과를 재사용`합니다.
- 역할: React.memo를 사용하면 불필요한 렌더링을 방지할 수 있습니다. 이는 성능 최적화에 유용하며, 특히 자주 렌더링되는 컴포넌트에서 효과적입니다.

```javascript
const MyComponent = React.memo(function MyComponent({ value }) {
  return <div>{value}</div>;
});
```
