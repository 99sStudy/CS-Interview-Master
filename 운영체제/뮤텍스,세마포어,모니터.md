## ✨경쟁상태를 해결하는 방법은 무엇인가요?

대표적으로는 뮤텍스와 세마포어, 모니터 3가지가 있습니다.

이들은 상호배제, 한정대기, 진행의 융통성의 조건을 만족시키며 경쟁상태를 해결합니다.

<br/>

## 🔁꼬리질문

### 🤔 뮤텍스가 무엇인가요?

```
공유된 자원의 데이터 혹은 임계영역(Critical Section) 등에 하나의 Process 혹은 Thread가 접근하는 것을 막아줌 (동기화 대상이 하나)
```

```
임계구역(Critical Section)을 가진 스레드들의 실행시간(Running Time)이 서로 겹치지 않고 각각 단독으로 실행(상호배제_Mutual Exclusion)되도록 하는 기술입니다.
```

- 뮤텍스는 상호배제를 구현하기 위한 동기화 기법중 하나인데, 공유 자원에 대한 접근을 동시에 하나의 스레드만 가능하게 제한한다.
- 뮤텍스는 상호 배제(Mutual Exclusion)의 줄임말 입니다.
- 뮤텍스는 바이너리 세마포어이라고들 하지만 엄밀히 말하면 다릅니다.
- 뮤텍스는 잠금을 기반으로 상호배제가 일어나는 `잠금 메커니즘`을 사용합니다.

### 🤔 뮤텍스의 특징은 무엇인가요?

#### 1. 뮤텍스는 단 하나의 프로세스/스레드만 접근 가능합니다.

- 뮤텍스가 사용되는 임계 구역은 공유가 불가능한 자원입니다. 따라서 한번에 단 하나의 프로세스/스레드만 접근이 가능하며, 사용중인 프로세스/스레드가 락(Lock)을 걸어버려 다른 프로세스/스레드의 접근을 방지합니다.

#### 2. 뮤텍스는 프로세스단에서 관리됩니다.

- 운영체제나 커널에 저장되고 변경되는 세마포어와는 다르게 뮤텍스는 프로세스단에서 관리됩니다.

#### 3. 뮤텍스의 락은 본인이 아니면 해제가 불가능합니다.

- 다른 프로세스들도 자유롭게 확인하고 변경 가능했던 세마포어와는 다르게 뮤텍스는 락을 건 프로세스/스레드 본인이 아니면 그 락을 해제할 수 없습니다.
<br/>
<hr/>
<br/>

### 🤔 세마포어가 무엇인가요?

```
공유된 자원의 데이터 혹은 임계영역(Critical Section) 등에 여러 Process 혹은 Thread가 접근하는 것을 막아줌 (동기화 대상이 하나 이상)
```

- 두개의 원자적(Atomic) 함수로 제어되는 정수 변수로 멀티프로그래밍 환경에서 공유자원에 대한 접근 제어를 하는 방법으로 사용되며, 1개의 공유되는 자원에 제한된 개수의 프로세스(Process), 또는 스레드(Thread)만 접근할 수 있도록 한다.
- 임계 구역에서 발생할 수 있는 문제를 해결하기 위해 등장한 개념입니다.
  - 어떤 공유 자원에 대해 동시에 접근할 수 있는 프로세스/스레드의 수를 변수로 제한하여 공유 자원의 오염을 막습니다.
  - 이 변수는 운영체제나 커널에 실제로 저장되며, 각 프로세스가 이 값을 확인하고 변경할 수 있습니다.
- 세마포어는 신호를 기반을 상호 배제가 일어나느 `신호 메커니즘`을 사용합니다.

### 🤔 세마포어의 특징은 무엇인가요?

- 세마포어 변수를 통해 공유자원에 접근할 수 있는 프로세스(스레드)의 수를 제어하고
- 프로세스의 실행 순서를 원하는 순서로 Ordering할 수 있다.

### 🤔 세마포어 변수를 통해 실행순서를 원하는 순서대로 ordering한다는 것이 무엇인가요?

프로세스 간의 `동기화`를 보장합니다.

```
1. A와 B가 자원을 사용하는 프로세스이고, A가 먼저 자원을 사용한 후에 B가 자원을 사용해야 한다고 가정
   -> 만약 A와 B가 동시에 자원을 사용하려고 한다면, 데이터 충돌이 발생할 수 있다.
2. A가 자원을 모두 사용한 후에 B가 자원을 사용해야 한다.
3.세마포어 변수를 사용하여 이러한 실행 순서를 조정할 수 있다.
```

### 🤔 동기화와 비동기화에 대해서 설명해주세요.

#### 동기화(Process Synchronization)

- 프로세스들이 서로 동작을 맞추는 것이다.
- 프로세스들이 서로 정보를 공유하는 것이다.

#### 비동기화

- 프로세스들이 서로에 대해 모른다.

### 🤔 그렇다면 왜 동기화가 필요한건가요?

- 병행 수행중인 비동기적 프로세스들이 공유자원에 동시에 접근할 때 문제가 발생 할 수 있다.
- 프로세스가 공유 자원에 접근할 때, 경쟁 조건이 발생하면 공유 자원을 신뢰할 수 없게 만들 수 있다.
- 이를 방지하기 위해 프로세스들이 공유 자원을 사용할 때 특별한 규칙을 만드는 것이 프로세스 동기화이다.

<br/>
<hr/>
<br/>

### 🤔 모니터란 무엇인가요?

- 모니터(monitor)는 둘 이상의 스레드나 프로세스가 공유 자원에 안전하게 접근할 수 있도록 공유자원을 숨기고 해당 접근에 대해 인터페이스만 제공하는 객체입니다.
- 이를 통해 공유자원에 대한 작업들을 순차적으로 처리합니다.

<hr />
<br/>

### 🤔 모니터와 세마포어의 차이점은 무엇인가요?

- `모니터`는 세마포어보다 구현하기 쉬우며 한번에 하나의 프로세스만 공유자원에 접근할 수 있습니다.
- 때문에 상호배제가 자동입니다.
- 인터페이스를 기반으로 구축됩니다.

<br/>

- `세마포어`는 모니터보다 구현하기가 어려우며 한번에 여러개의 프로세스가 공유자원에 접근할 수 있습니다.
- 이 때문에 상호배제를 명시적으로 구현해야 합니다.
- 또한 정수변수를 기반으로 구축됩니다.

### 🤔 뮤텍스와 모니터의 차이점은 무엇인가요?

- `뮤텍스`는 다른 프로세스 간에 동기화를 할 때 사용합니다.
- 보통 \*운영체제 커널에 의해 제공되며 무겁고 느립니다.

<br/>

- `모니터`는 하나의 프로세스 내 다른 스레드 간 동기화를 할 때 사용한다.
- 프레임워크나 라이브러리 그 자체에서 제공되며 가볍고 빠르다.

### 🤔 뮤텍스와 세마포어의 차이점은 무엇인가요?

- `뮤텍스`는 `소유권을 가지는 락`입니다. 즉, 뮤텍스를 획득한 스레드만이 이를 해제할 수 있습니다. 이는 특정 스레드가 임계 구역을 독점적으로 사용하도록 보장합니다.
- `뮤텍스`는 `주로 임계 구역을 보호하는 데 사용`됩니다. 뮤텍스는 한 번에 하나의 스레드만 임계 구역에 들어갈 수 있도록 보장합니다.
- `뮤텍스`는 `이진 세마포어와 유사`하게 동작하며, 초기값이 1입니다.

<br/>

- `세마포어`는 `소유권 개념이 없습니다`. 세마포어를 기다리고(감소시키고, P 연산) 해제하는(증가시키고, V 연산) 스레드가 다를 수 있습니다.
- `세마포어`는 `임계 구역 보호뿐만 아니라 제한된 자원(예: 풀(pool) 자원)의 접근을 관리하는 데 사용`됩니다. 세마포어는 여러 스레드가 자원에 접근할 수 있는 최대 수를 관리할 수 있습니다.
- `세마포어`는 `초기값을 0 이상의 임의의 값으로 설정`할 수 있습니다. 이 값은 세마포어가 관리하는 자원의 개수를 나타냅니다.

### 📜용어 정리

- `Shared data(공유 데이터)` or `Critical data` : 여러 프로세스들이 공유하는 데이터
- `Critical section(임계 영역`)` : 공유 데이터를 접근하는 코드 영역
- `Mutual exclusion(상호배제)` : 둘 이상의 프로세스가 동시에 critical section에 진입하는 것을 막는 것
- `Race Condition (경쟁 조건)` : 여러 프로세스가 공유 자원에 동시에 접근할 때 실행 순서에 따라 실행 결과가 달라질 수 있는 상황
