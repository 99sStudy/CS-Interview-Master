## ✨컨텍스트 스위칭이 무엇인가요?

`PCB를 기반으로 프로세스의 상태를 저장하고 다시 복원시키는 과정`입니다. 스레드 또한 가능합니다.

이는 프로세스가 종료되거나 인터럽트에 의해 발생이 됩니다.

예를 들어 프로세스1이 실행되다가 인터럽트나 시스템 콜이 발생하면 프로세스1이 잠시 멈춥니다.

그리고 프로세스1의 PCB1에 그 때의 상태를 저장합니다.

그리고 다른 PCB2를 불러와서 CPU가 그 PCB2를 기반으로 일을 합니다.

그래서 프로세스2가 실행이 됩니다.

이렇게 저장하고 복원하는 과정을 컨텍스트 스위칭이라고 합니다.

## 🔁꼬리질문

## 🤔컨텍스트 스위칭의 주의점이 무엇이 있나요?

1. 유후시간의 발생: 컨텍스트 스위칭을 할 때마다 유후 시간이 생겨서 cpu의 가용성이 떨어지는 비용이 발생합니다.

PCB를 저장하고 복원할 때 무조건 Idle time(유후 시간)이 생깁니다.

즉 `CPU가 일을 쉬게 됩니다.`

항상 우리 컴퓨터는 효율적으로 조금 더 많은 일을 하게끔 설계가 되어있고

이를 지향해야하는데 유후시간이 발생하게 된다면 cpu의 가용성이 떨어지 비용이 발생하게 됩니다.

2. 캐시 미스 : 프로세스가 가지고 있는 메모리 주소가 그대로 있으면 잘못된 주소 변환이 생기므로 캐시 클리어 과정이 무조건 일어나게 되고, 이 때문에 캐시미스가 발생합니다.

주소를 참조할 때 페이지 테이블을 기반으로 가상 주소가 실제 주소에서 맵핑되어 있습니다.

이때 캐싱 계층인 TLB라는게 있는데 컨텍스트 스위칭이 일어나게 되면

캐시 클리어 과정이 일어나서 TLB에 있던 캐싱이 없어지게 됩니다.

이렇게 되면 TLB라는 캐싱 계층이 제대로 동작하지 못하게 됩니다.

## 🤔 스레드에서의 컨텍스트 스위칭도 마찬가지인가요?

스레드는 스택 영역을 제외한 모든 메모리를 공유하기 때문에 `비용이 더 적고 시간도 더 적게 걸린다는 장점`이 있습니다.
