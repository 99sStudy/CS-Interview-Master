# ✨NextJs App Router의 구조와 동작 방식에 대해서 설명해주세요.

- Next.js의 **App Router**는 Next.js 13부터 도입된 새로운 라우팅 시스템입니다. 이 새로운 라우터는 기존의 `pages` 디렉토리를 대체하는 방식으로, 더욱 유연한 `파일 기반 라우팅 시스템을 제공`합니다.

- 기존보다 세밀한 제어가 가능하고 서버 컴포넌트와 클라이언트 컴포넌트를 함께 사용할 수 있어 효율적이고 최적화된 애플리케이션을 개발하는 데 큰 도움이 됩니다. 이제 App Router의 동작 원리를 자세히 알아보겠습니다.

---

### App Router의 구조와 작동 방식

1. **디렉토리 기반 라우팅**

   - `app/` 디렉토리 내에 폴더를 생성하면, 해당 폴더의 경로가 곧 URL이 됩니다. 예를 들어, `app/blog/page.tsx`는 `/blog` URL에 대응됩니다.
   - `page.tsx` 파일을 각 폴더에 추가하면 해당 경로의 페이지가 렌더링됩니다. 이 방식은 파일 시스템과 URL 구조를 직접 연결하기 때문에 코드 가독성과 유지보수가 쉬워집니다.

2. **레이아웃(Layout) 기능**

   - App Router의 가장 큰 특징 중 하나는 `layout.tsx` 파일입니다. 이 파일은 특정 경로의 공통 UI를 정의하는 데 사용됩니다. 예를 들어, `app/blog/layout.tsx` 파일을 추가하면 `/blog` 이하의 모든 페이지에 해당 레이아웃이 적용됩니다.
   - Layout 컴포넌트는 중첩 가능하여, 여러 레벨에 걸쳐 서로 다른 레이아웃을 설정할 수 있습니다.

3. **서버 컴포넌트와 클라이언트 컴포넌트**

   - App Router는 기본적으로 서버 컴포넌트를 사용합니다. 컴포넌트의 최상단에 `"use client";`를 선언하지 않으면 기본적으로 서버에서 렌더링됩니다.
   - 서버 컴포넌트는 백엔드에서 데이터를 가져와 HTML을 생성하여 클라이언트에 보내므로, 데이터 패칭과 렌더링이 동시에 일어납니다. 이를 통해 초기 로딩 속도가 개선되고 SEO에도 유리합니다.
   - 특정 컴포넌트를 클라이언트에서만 동작하게 하고 싶다면 `"use client";` 선언을 사용하여 클라이언트 컴포넌트로 전환할 수 있습니다.

4. **동적 라우팅과 Segment**

   - `app/` 디렉토리 내에서 `[parameter]` 형태의 폴더를 사용하면 동적 라우팅이 가능합니다. 예를 들어, `app/blog/[id]/page.tsx`는 `/blog/1`, `/blog/2` 등 다양한 ID에 대응할 수 있습니다.
   - 이를 통해 ID나 슬러그 기반으로 라우팅할 수 있어 사용자별 맞춤형 페이지 구성이 가능합니다.

5. **Data Fetching: getServerSideProps와 getStaticProps의 대체**
   - App Router에서는 `getServerSideProps`와 `getStaticProps`가 더 이상 필요하지 않습니다. 서버 컴포넌트 내에서 `fetch`를 사용하면 해당 데이터는 서버에서 패칭되며, 클라이언트로 데이터를 전달합니다.
   - 이 방식은 더욱 직관적이며, `useEffect`와 같은 클라이언트 측 라이프사이클 관리가 필요하지 않아 코드를 간결하게 유지할 수 있습니다.

---

### App Router의 주요 이점

- **SEO 최적화**: `서버 컴포넌트를 기본`으로 하여 초기 렌더링을 서버에서 수행하므로, SEO 최적화에 유리합니다.
- **성능 최적화**: `서버 컴포넌트에서 데이터를 패칭`해 클라이언트로 넘기므로 클라이언트 사이드 렌더링에 따른 부담이 줄어듭니다.
- **코드 분리 및 관리 용이**: 파일 기반으로 페이지와 레이아웃을 구성할 수 있어 직관적이고 관리가 쉬워집니다.
- **향상된 유연성**: 서버와 클라이언트 컴포넌트를 원하는 대로 조합할 수 있어 개발 효율성이 높아집니다.

# ✨Next.js에서 페이지 간 이동을 수행할 때 useRouter 훅의 push와 replace 메서드의 차이점은 무엇인가요?

`useRouter` 훅의 `push 메서드`는 새로운 경로를 `히스토리 스택에 추가하여 페이지 간 이동을 수행`하며, 사용자가 브라우저의 `뒤로 가기 버튼을 사용할 수 있게` 합니다.

반면, `replace 메서드`는 `현재 경로를 새로운 경로로 대체하여 히스토리 스택에 추가하지 않기 때문`에, 사용자가 뒤로 가기 버튼을 사용해도 이전 페이지로 돌아갈 수 없습니다.

`replace`는 페이지 이동 시 `현재 페이지를 히스토리에서 완전히 대체할 때 사용`됩니다.

# Page Router와 App Router 차이점

주요 차이점

### 디렉토리 구조

Pages Router: pages 디렉토리
App Router: app 디렉토리

### 라우트 정의

Pages Router: `파일 이름으로 라우트 정의`
App Router: `폴더 이름으로 라우트 정의`, page.js 파일이 해당 라우트의 UI를 담당

### 레이아웃

Pages Router: \_app.js와 \_document.js로 전역 레이아웃 관리
App Router: 각 폴더에 layout.js 파일을 두어 중첩 레이아웃 쉽게 구현

### 데이터 페칭

Pages Router: getStaticProps, getServerSideProps 등의 특수 함수 사용
App Router: 컴포넌트 내에서 직접 async/await 사용 가능

### 서버 컴포넌트

Pages Router: 클라이언트 컴포넌트만 사용
App Router: 서버 컴포넌트 기본 지원, 'use client' 지시어로 클라이언트 컴포넌트 지정

### 동적 라우트

Pages Router: [param].js 파일로 동적 라우트 생성
App Router: [param] 폴더로 동적 라우트 생성
