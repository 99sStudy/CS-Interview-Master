## ✨실행컨텍스트에 대해서 설명해주세요

실행 컨텍스트는 `실행할 코드에 제공할 환경 정보들을 모아놓은 객체`입니다.

자바스크립트는 동일한 환경에 있는 환경 정보들을 모은 실행 컨텍스트를 콜스택에 쌓아올린 후 실행하여 코드의 환경과 순서를 보장할 수 있게 됩니다.

풀어서 설명하면 스택의 경우 LIFO(Last In, First Out) 의 구조이기에 순서를 보장,

콜스택 내부에 쌓인 실행 컨텍스트의 정보를 통해 환경을 보장할 수 있는 것이라 생각합니다.

## 🔁꼬리질문

### 🤔실행컨텍스트 내부는 무엇으로 이루어져있나요? (실행컨텍스트에 대해서 자세히 설명해주세요)

우선 실행 컨텍스트 내부엔 variable environment, lexical environment, this binding 가 있습니다.

- VariableEnvironment: `선언된 변수들을 포함한 환경을 나타내는 객체`, 자신의 외부 환경에 대한 참조, 호이스팅된 변수들의 정보가 포함된다. - `초기 상태 기억`
- LexicalEnvironment : 변수, 함수 등의 정보를 담은 환경을 나타내는 객체, 자신의 외부 환경에 대한 참조를 가지고 있으며, 여기에는 스코프 체인정보가 포함된다. - `최신 상태 저장`
- ThisBinding : `this 식별자가 바라봐야 할 대상 객체를 의미`한다. 호출방식에 따라 결정된다.

![image](https://github.com/99sStudy/CS-Interview-Master/assets/90139306/80f9ad00-70e2-4f5e-9851-5631dd7f6869)

<hr>

### 🤔렉시컬 환경이란?

렉시컬 환경(Lexical Environment)은 `변수 식별자, 해당 변수에 바인딩 된 값, 스코프 체인을 포함하는 자료 구조`입니다.

함수를 호출할 때 마다 새로운 렉시컬 환경이 생성되며, 함수의 실행 컨텍스트에 대한 정보를 담고 있습니다.

그리고 함수 실행이 종료되면 해당 렉시컬 환경은 제거됩니다.

Environment Record(환경 레코드) 와 OuterEnvironment Reference(외부 환경 참조) 로 이루어져있다.

- Environment Record(환경 레코드)

  `식별자`와 `식별자에 바인딩된 값`을 기록한다.

- OuterEnvironment Reference(외부 환경 참조)

  `바깥 렉시컬 환경`을 가리킵니다.

<hr>

### 🤔렉시컬 스코프란 무엇인가요?

렉시컬 스코프란, `변수가 어디에 정의되었는지에 따라 스코프가 결정되는 메커니즘`을 의미하며, 정적 스코프라고 부르기도 합니다.

이는 코드가 작성된 위치에 따라 변수의 유효 범위가 결정된다는 뜻입니다.

이러한 이유로, 서로 독립적인 로컬 스코프 A, B가 있을 때, A 내부에 선언된 변수를 B 위치에서, B 내부에 선언된 변수를 A 위치에서 참조할 수 없습니다. (단, 이 때 각 변수는 전역 변수에도 선언되어 있지 않다고 가정)

또한, 함수가 중첩된 경우 내부 함수는 외부 함수의 변수를 참조할 수 있지만, 외부 함수는 내부 함수의 변수를 참조할 수 없습니다.

 <hr>

### 🤔실행컨텍스트의 생성단계와 실행단계에 대해서 설명해주세요

생성단계 : 실행컨텍스트 생성, `선언문만 실행해서 환경 레코드에 기록`

실행단계 : 선언문 외 나머지 코드 순차적 실행, 환경 레코드를 참조하거나 업데이트

생성 단계 : Javascript 엔진은 `실행 컨텍스트를 생성`하고, `스크립트의 환경을 설정`한다. 그리고 `변수 및 함수의 값을 결정`하고, 실행 컨텍스트에 대한 `스코프 체인을 설정`한다

실행 단계 : Javascript 엔진은 실행 컨텍스트에서 `코드를 실행`하고, 스크립트의 `모든 문 또는 식을 처리`하고 `모든 함수 호출에 대한 평가가 진행`된다.

### 전역 실행 컨텍스트 vs 함수 실행 컨텍스트

전역실행 컨텍스트와 함수실행 컨텍스트는 엄연한 차이점이 존재한다.

1. 스코프

- 전역 실행 컨텍스트는 `전역 스코프를 구성`하고, 스크립트 실행시 `가장 먼저 생성`된다
- 함수 실행 컨텍스트는 `함수 내부의 스코프를 구성`하고, 다른 함수가 호출 될때마다 함수 스코프가 생성된다

2. 활성 객체

- 전역실행 컨텍스트는 전역 범위에서 선언된 `전역 변수와 함수`, 그리고 `전역객체(window,global)`에 대한 참조
- 함수실행 컨텍스트는 `해당 함수의 스코프에 기반하여 생성`되며, `함수 내부에서 선언된 변수와 함수, 매개변수, this값 등`을 저장

3. 호출 시점과 동작

- 전역실행 컨텍스트는 `스크립트가 실행될때 생성`되며, `코드의 실행이 끝까지 완료될때까지 유지`된다
- 함수실행 컨텍스트는 `함수가 호출될때 생성`되며, 함수의 실행이 완료되면 소멸한다. 함수를 호출할때마다 그 함수의 새로운 함수 실행 컨텍스트가 생성되므로, 서로 다른 함수 호출은 `각각 독립된 함수 실행 컨텍스트를 생성하고 실행`한다.
