# ✨호이스팅이란 무엇인지 설명해주세요

호이스팅이란, `변수와 함수의 선언문이 해당 스코프의 최상단으로 끌어올려지는 현상`을 의미합니다.

이러한 현상으로 `변수와 함수가 초기화되기 전에 접근할 수 있는 현상이 발생`합니다.

단, ES6에서 등장한 방식인 let과 const로 선언한 변수들은 호이스팅은 되지만, 초기화 전에 접근할 수는 없습니다.

## 🔁꼬리질문

### 🤔변수와 함수 모두 호이스팅이 동일하게 동작하나요?

아닙니다. 변수는 선언만 호이스팅 되지만, 함수는 선언과 초기화 모두 호이스팅됩니다. 이러한 특성으로 인해, 변수는 초기화 전에 참조할 경우, undefined가 나오지만, 함수는 초기화 전에 호출해도 정상적으로 호출이 가능합니다.

### 🤔왜 변수와 달리, 함수만 초기화 과정까지 호이스팅 되나요?

function 키워드로 선언한 함수는 선언과 초기화, 할당 단계가 내부적으로 동시에 진행되기 때문입니다.

반면, 변수는 선언과 초기화를 한 구문으로 코딩했어도, 내부적으로는 두 단계에 걸쳐서 실행됩니다.

### 🤔왜 let과 const으로 선언한 변수는 초기화 전에 접근할 수 없도록 막아 놓았나요?

호이스팅 현상으로 인해, 초기화되지 않은 변수를 개발자가 참조할 수 없도록 하기 위해서입니다.

즉, `코드의 예측 가능성을 높이기 위해 Temporal Dead Zone (TDZ) 이라는 개념을 도입`한 것입니다.

또한, 자바스크립트의 창시자인 브랜든 아이크에 따르면, 호이스팅 현상은 자바스크립트 개발 과정에서 실수로 생긴, 일종의 버그이기 때문에, 이를 ES6 버전에서 해결한 것으로 보입니다.

### 🤔자바스크립트는 인터프리터 언어인데, 어떻게 호이스팅 현상이 일어날 수 있는건가요?

일반적으로 알고 있는 인터프리터의 개념과는 달리, 자바스크립트 엔진은 코드 실행을 위해 `파싱`과 `실행`이라는 두 단계를 거치게 됩니다.

호이스팅이 처리되는 파싱 단계에서는 호이스팅 뿐만 아니라, 구문 트리와 실행 컨텍스트를 생성하는 작업도 함께 수행됩니다.

### JIT 컴파일러?

자바스크립트 뿐만 아니라 모든 고급언어들은 컴퓨터에서 구동되기 위해서 `기본적으로 기계가 이해가능한 기계어로 변환되어질 필`요가 있다.

자바스크립트는 아래의 과정을 거쳐 바이트 코드로 변환된다.

```
자바스크립트 코드 --(토크나이저)--> 토큰 --(파서)--> AST[추상구문트리] --(인터프리터)--> 바이트 코드
```

- Tokenizing : 주어진 소스코드를 의미있는 단위로 나누는 과정이다. 이렇게 나누어진 것을 Token이라고도 한다. (보통 의미를 부여하는 lexer의 역할도 여기에 포함된다.)

- Parser : Tokenizer 로부터 생성된 토큰들의 배열을 바탕으로 이를 자바스크립트 문법에 알맞은 방식으로 AST(Abstract Syntax Tree) 로 변화 시킨다.

이렇게 생성된 AST 는 인터프리터를 거쳐 기계가 알아볼 수 있는 바이트 코드롤 변환되게 되는 것이다.

위 과정까지만해도 자바스크립트는 인터프리터 언어로서 기능을 해왔다.

하지만 점차 웹에서도 다양한 요구사항들이 추가되면서 더 많은 기능들을 갖추어야 했고 이는 자바스크립트가 점차 성능상 무거워지는 계기가 되었다.

한편, 2009년 당시 구글은 웹에서 이용가능한 지도인 구글맵스를 개발하려고 있었는데 지도 어플리케이션은 사용자 상호작용이 많이 필요한 만큼 성능상 개선이 필요했고 이를 개선하고자 내놓은 것이 바로 Chrome V8 엔진이다.

이를 통해 자바스크립트 언어에서도 컴파일을 진행하게 된 계기가 되었다.

자바스크립트가 Parser, AST, Interpreter를 거쳐 ByteCode로 변모하는 것은 V8 엔진이 등장하기 전까지의 JS의 모습이다.

이에 추가적으로 `Profiler 라는게 등장`한다.

이 `Profiler` 는 `인터프리터를 관찰하며 실행되는 코드를 계속해서 모니터링` 한다.

모니터링하는 과정에 코드내에 반복 실행되는 것이 있다면 이를 컴파일러에게 넘겨 실시간으로 컴파일 하도록 한다.

이를 통해 최적화된 바이트 코드를 생성해낸다.

이처럼 필요할때 마다 컴파일 하는 컴파일러를 `JIT(Just-In-Time) 컴파일러`라고 부른다.
